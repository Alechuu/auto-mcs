# @player.on_join(user):
#     server.execute(f'/say Welcome to the server {user.name}!')
#     print("big penis!")



# @player.on_leave(user):
#     server.execute(f'/say See ya later {user.name}!')
#     print(test)



import os
import requests
import glob as gl
import time
from datetime import datetime as dt
import library


test_var = 0


@player.on_join(user, data):
    server.execute(f'/say Welcome to the server {user.name}!')



@player.on_leave(user, data):
    server.execute(f'/say See ya later {user.name}!')



def test_func(*args):
    library.anti_depression()
    timeglele=awe22
    return args



# Permission: anyone, op, server
@player.on_alias(command='test', arguments={'lol': True}, permission='op', description='test'):
    global test_var

    server.execute(f'/say permission test, {arguments}')
    time.sleep(5)
    test_var += 1
    server.execute(f'/say Argument 1 is: {arguments["lol"]}')
    server.execute(f'/say test_var is {test_var}')
    server.execute(f'/say {test_func(test_var)}')


@player.on_alias(command='test2', arguments={'teehee': False}, permission='op', description='test'):
    server.execute(f'/say permission test, {arguments}, {permission}')



@player.on_alias(command='py', arguments={'command': True}, permission='op', description='lol its python bro'):
    values = {}
    exec(f"exec_return = {arguments['command']}", globals(), values)
    server.execute(f'/say {values["exec_return"]}')
    

@player.on_alias(user, command='permtest', arguments={'arg': True, 'arg2': False}, permission='op', description='Test command'):
    server.execute(f'/say {user.name} executed {command} with the following arguments: {arguments}')


@player.on_message(user, msg):
    if "give me" in msg and "diamond" in msg:
        server.execute(f'/give {user.name} diamond')
        print("test", user.name, sep='\n')


@player.on_message(user, msg):
    if msg == 'test':
        user.log('I will not give you op', color='light_purple', style='obfuscated')


@server.on_loop(1, 'minute'):
    server.execute(f'/kill @e[type=Item]')


@player.on_message(user, msg):
    if "geometry dash" in msg:
        server.execute(f"/ban {user.name}")
    #   test_func()